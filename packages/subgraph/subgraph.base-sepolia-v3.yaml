specVersion: 1.0.0
indexerHints:
  prune: auto
schema:
  file: ./schema-v3.graphql
dataSources:
  - kind: ethereum
    name: SlotFactory
    network: base-sepolia
    source:
      address: "0xd8d1b8DaeC8Dd0Ad62a5C30Ccd1BaBF98916edc4"
      abi: SlotFactory
      startBlock: 38232903
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Factory
        - Slot
      abis:
        - name: SlotFactory
          file: ./abis/SlotFactory.json
      eventHandlers:
        - event: SlotDeployed(indexed address,indexed address,indexed address,(bool,bool,address),(uint256,address,uint256,uint256))
          handler: handleSlotDeployed
      file: ./src/slot-factory.ts
templates:
  - kind: ethereum
    name: Slot
    network: base-sepolia
    source:
      abi: Slot
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Slot
        - SlotEvent
      abis:
        - name: Slot
          file: ./abis/Slot.json
      eventHandlers:
        - event: Bought(indexed address,indexed address,uint256,uint256,uint256)
          handler: handleBought
        - event: Released(indexed address,uint256)
          handler: handleReleased
        - event: Liquidated(indexed address,indexed address,uint256)
          handler: handleLiquidated
        - event: PriceUpdated(uint256,uint256)
          handler: handlePriceUpdated
        - event: Deposited(indexed address,uint256)
          handler: handleDeposited
        - event: Withdrawn(indexed address,uint256)
          handler: handleWithdrawn
        - event: TaxCollected(indexed address,uint256)
          handler: handleTaxCollected
        - event: Settled(uint256,uint256)
          handler: handleSettled
        - event: TaxUpdateProposed(uint256)
          handler: handleTaxUpdateProposed
        - event: ModuleUpdateProposed(address)
          handler: handleModuleUpdateProposed
        - event: PendingUpdateCancelled()
          handler: handlePendingUpdateCancelled
        - event: PendingUpdateApplied(uint256,address)
          handler: handlePendingUpdateApplied
        - event: LiquidationBountyUpdated(uint256)
          handler: handleLiquidationBountyUpdated
      file: ./src/slot.ts
